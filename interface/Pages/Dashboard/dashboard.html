<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de Bord | Param√®tres Utilisateur</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .hover-shine {
            transition: all 0.3s ease;
        }
        
        .hover-shine:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .tab-active {
            background-color: #3b82f6;
            color: white;
            border-radius: 8px;
        }
        
        .profile-img {
            transition: transform 0.5s ease;
        }
        
        .profile-img:hover {
            transform: scale(1.05);
        }
        
        .switcher-input:checked+.switcher-indicator {
            background-color: #3b82f6;
        }
        
        .switcher-indicator {
            transition: background-color 0.3s ease;
        }
    </style>
</head>

<body class="bg-gray-100 font-sans">
    <nav class="bg-white shadow-md p-4">
        <ul class="flex space-x-6 justify-center">
            <li><a href="dashboard.html" class="text-blue-600 font-semibold hover-shine">Propelize</a></li>
            <li><a href="../Vehicules/vehicules.html" class="text-gray-600 hover:text-blue-600 hover-shine">V√©hicules</a></li>
            <li><a href="../Utilisateur/utilisateur.html" class="text-gray-600 hover:text-blue-600 hover-shine">Utilisateurs</a></li>
        </ul>
    </nav>

    <div class="container mx-auto mt-8 p-6 bg-white rounded-lg shadow-lg">
        <div class="flex flex-col md:flex-row">
            <!-- Sidebar -->
            <div class="md:w-1/4 p-4">
                <div class="space-y-2">
                    <!-- üè† Accueil -->
                    <a href="#account-general" class="block p-3 rounded-lg hover-shine tab-link tab-active">
                        <i class="fas fa-home mr-2"></i> Accueil
                    </a>

                    <!-- üßë‚Äçüíº √Ä propos -->
                    <a href="#account-change-password" class="block p-3 rounded-lg hover-shine tab-link">
                        <i class="fas fa-address-card mr-2"></i> √Ä propos
                    </a>

                    <!-- üìÑ Informations -->
                    <a href="#account-info" class="block p-3 rounded-lg hover-shine tab-link">
                        <i class="fas fa-info-circle mr-2"></i> Informations
                    </a>

                    <!-- üîî Contact -->
                    <a href="#account-notifications" class="block p-3 rounded-lg hover-shine tab-link">
                        <i class="fas fa-envelope mr-2"></i> Contact
                    </a>

                </div>
            </div>

            <!-- Main Content -->
            <div class="md:w-3/4 p-6">
                <div id="account-general" class="tab-content">
                    <h4 class="text-2xl font-semibold mb-4">Profil G√©n√©ral</h4>
                    <div class="flex items-center space-x-4 mb-6">
                        <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Profile" class="w-24 h-24 rounded-full profile-img" id="profileImage">
                        <div>
                        </div>
                    </div>
                </div>

                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                <script>
                    $(document).ready(function() {
                        // Tab switching
                        $('.tab-link').on('click', function(e) {
                            e.preventDefault();
                            $('.tab-content').addClass('hidden');
                            $('.tab-link').removeClass('tab-active');
                            $($(this).attr('href')).removeClass('hidden');
                            $(this).addClass('tab-active');
                        });

                        // Profile image upload
                        $('#profileUpload').on('change', function(e) {
                            if (this.files && this.files[0]) {
                                const reader = new FileReader();
                                reader.onload = function(e) {
                                    $('#profileImage').attr('src', e.target.result).addClass('animate-pulse');
                                    setTimeout(() => $('#profileImage').removeClass('animate-pulse'), 500);
                                };
                                reader.readAsDataURL(this.files[0]);
                            }
                        });

                        // Reset profile image
                        $('#resetProfileImg').on('click', function() {
                            $('#profileImage').attr('src', 'https://bootdey.com/img/Content/avatar/avatar7.png');
                            $('#profileUpload').val('');
                            $(this).html('<i class="fas fa-check mr-2"></i> R√©initialis√©').addClass('bg-green-500 text-white');
                            setTimeout(() => {
                                $(this).html('<i class="fas fa-redo mr-2"></i> R√©initialiser').removeClass('bg-green-500 text-white').addClass('bg-gray-200');
                            }, 1500);
                        });

                        // Password visibility toggle
                        function togglePassword(inputId, toggleId) {
                            $(toggleId).on('click', function() {
                                const input = $(inputId);
                                const icon = $(this).find('i');
                                if (input.attr('type') === 'password') {
                                    input.attr('type', 'text');
                                    icon.removeClass('fa-eye').addClass('fa-eye-slash');
                                } else {
                                    input.attr('type', 'password');
                                    icon.removeClass('fa-eye-slash').addClass('fa-eye');
                                }
                            });
                        }
                        togglePassword('#currentPassword', '#toggleCurrentPassword');
                        togglePassword('#newPassword', '#toggleNewPassword');
                        togglePassword('#confirmPassword', '#toggleConfirmPassword');

                        // Password validation
                        $('#saveBtn').on('click', function() {
                            let isValid = true;
                            if ($('#account-change-password').is(':visible')) {
                                const currentPassword = $('#currentPassword').val();
                                if (!currentPassword) {
                                    $('#currentPassword').addClass('border-red-500');
                                    $('#currentPasswordError').text('Veuillez entrer votre mot de passe actuel').removeClass('hidden');
                                    isValid = false;
                                } else {
                                    $('#currentPassword').removeClass('border-red-500');
                                    $('#currentPasswordError').addClass('hidden');
                                }

                                const newPassword = $('#newPassword').val();
                                if (!newPassword || newPassword.length < 8 || !/\d/.test(newPassword) || !/[A-Z]/.test(newPassword)) {
                                    $('#newPassword').addClass('border-red-500');
                                    $('#newPasswordError').text('Le mot de passe doit contenir au moins 8 caract√®res, un chiffre et une majuscule').removeClass('hidden');
                                    isValid = false;
                                } else {
                                    $('#newPassword').removeClass('border-red-500');
                                    $('#newPasswordError').addClass('hidden');
                                }

                                const confirmPassword = $('#confirmPassword').val();
                                if (newPassword !== confirmPassword) {
                                    $('#confirmPassword').addClass('border-red-500');
                                    $('#confirmPasswordError').text('Les mots de passe ne correspondent pas').removeClass('hidden');
                                    isValid = false;
                                } else {
                                    $('#confirmPassword').removeClass('border-red-500');
                                    $('#confirmPasswordError').addClass('hidden');
                                }
                            }

                            if (isValid) {
                                $(this).html('<i class="fas fa-check mr-2"></i> Enregistr√©').removeClass('bg-blue-500').addClass('bg-green-500');
                                setTimeout(() => {
                                    $(this).html('<i class="fas fa-save mr-2"></i> Enregistrer').removeClass('bg-green-500').addClass('bg-blue-500');
                                }, 2000);
                                $('html, body').animate({
                                    scrollTop: 0
                                }, 'slow');
                            }
                        });

                        // Cancel button
                        $('#cancelBtn').on('click', function() {
                            $(this).html('<i class="fas fa-times mr-2"></i> Annul√©').addClass('bg-red-500 text-white');
                            setTimeout(() => {
                                $(this).html('<i class="fas fa-times mr-2"></i> Annuler').removeClass('bg-red-500 text-white').addClass('bg-gray-200');
                            }, 1500);
                        });

                        // Bio character counter
                        $('#userBio').on('input', function() {
                            const count = $(this).val().length;
                            $('#charCount').text(count);
                            if (count > 500) {
                                $(this).addClass('border-red-500');
                            } else {
                                $(this).removeClass('border-red-500');
                            }
                        }).trigger('input');
                    });
                </script>
</body>

</html>